Started GET "/" for 127.0.0.1 at 2023-11-19 11:16:24 +0100
  [1m[36mActiveRecord::SchemaMigration Load (35.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#index as HTML
  [1m[36mRank Load (31.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  ‚Ü≥ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (31.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (31.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (31.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (30.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (42.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  ‚Ü≥ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (32.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  ‚Ü≥ app/views/restaurants/index.html.erb:51:in `each_with_index'
  Rendered restaurants/index.html.erb within layouts/application (Duration: 1142.5ms | Allocations: 87668)
  Rendered layout layouts/application.html.erb (Duration: 1143.7ms | Allocations: 87795)
Completed 500 Internal Server Error in 1933ms (ActiveRecord: 570.6ms | Allocations: 127914)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /usr/local/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (Nil location provided. Can't build URI.):
    51:             <% @restaurants.each_with_index do |restaurant, i| %>
    52:                 <%= link_to restaurant_path(restaurant), style: "text-decoration: none;" do %>
    53:                     <div class="explore_restaurants_box">
    54:                         <%= image_tag restaurant.ruta_img_fondo, class: "explore_restaurants_box_image" %>
    55:                         <div class="explore_restaurant_box_name"><%= restaurant.nombre %></div>
    56:                         <div class="explore_restaurant_box_category"><%= restaurant.categoria %></div>
    57:                         <div>
  
app/views/restaurants/index.html.erb:54
app/views/restaurants/index.html.erb:52
app/views/restaurants/index.html.erb:51:in `each_with_index'
app/views/restaurants/index.html.erb:51
Started GET "/" for 127.0.0.1 at 2023-11-19 11:16:38 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRank Load (40.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  ‚Ü≥ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (35.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (36.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (32.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (33.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (31.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  ‚Ü≥ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (35.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  ‚Ü≥ app/views/restaurants/index.html.erb:51
  Rendered restaurants/index.html.erb within layouts/application (Duration: 114.8ms | Allocations: 7639)
  Rendered layout layouts/application.html.erb (Duration: 115.1ms | Allocations: 7732)
Completed 500 Internal Server Error in 802ms (ActiveRecord: 490.6ms | Allocations: 22894)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /usr/local/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (Nil location provided. Can't build URI.):
    51:             <% @restaurants.each.with_index do |restaurant, i| %>
    52:                 <%= link_to restaurant_path(restaurant), style: "text-decoration: none;" do %>
    53:                     <div class="explore_restaurants_box">
    54:                         <%= image_tag restaurant.ruta_img_fondo, class: "explore_restaurants_box_image" %>
    55:                         <div class="explore_restaurant_box_name"><%= restaurant.nombre %></div>
    56:                         <div class="explore_restaurant_box_category"><%= restaurant.categoria %></div>
    57:                         <div>
  
app/views/restaurants/index.html.erb:54
app/views/restaurants/index.html.erb:52
app/views/restaurants/index.html.erb:51:in `each'
app/views/restaurants/index.html.erb:51:in `with_index'
app/views/restaurants/index.html.erb:51
Started GET "/" for 127.0.0.1 at 2023-11-19 11:19:11 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRank Load (54.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  ‚Ü≥ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (41.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (51.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (40.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (30.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  Rendered restaurants/index.html.erb within layouts/application (Duration: 2.0ms | Allocations: 1614)
  Rendered layout layouts/application.html.erb (Duration: 2.4ms | Allocations: 1718)
Completed 500 Internal Server Error in 725ms (ActiveRecord: 627.1ms | Allocations: 16859)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /usr/local/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::SyntaxErrorInTemplate (Encountered a syntax error while rendering template: check <div class="explore_container">
    <div class="explore_best_valued">
        <div class="explore_top_section_title">Mejor valorados</div>
        <div class="explore_top_section_best_valued_list">
          <% @tops.each_with_index do |restaurant, pos| %>
            <%= link_to restaurant_path(restaurant), class: "explore_top_section_best_valued_list_item", style: "text-decoration: none" do %>
                <%= pos + 1 %> - <%= restaurant.nombre %> 
            <% end %>
          <% end %>
        </div>
    </div>
    <div class="explore_promoted_restaurant">
        <div class="explore_top_section_title">Restaurante promocionado</div>
        <div class="explore_promoted_restaurant_box">
            <%= image_tag "Default-restaurant-img", class: "explore_promoted_restaurant_image" %>
            <div class="explore_promoted_restaurant_info">
                <div>
                    <div class="explore_promoted_restaurant_name">
                        Madison Smashburgers<br><span class="title_key_word">Burger</span>
                    </div>
                    <div class="explore_promoted_restaurant_stars">
                        <%= image_tag "Star", style: "width: 25px; height: 25px" %>
                        <%= image_tag "Star", style: "width: 25px; height: 25px" %>
                        <%= image_tag "Star", style: "width: 25px; height: 25px" %>
                        <%= image_tag "Star", style: "width: 25px; height: 25px" %>
                        <%= image_tag "Star", style: "width: 25px; height: 25px" %>
                    </div>
                </div>
                <div>
                    <div class="restaurants_einaeats_button">
                        <%= image_tag "Bolsa-einaeats" %>
                        <span class="restaurant_einaeats_button_text">Pedir en EinaEats</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="explore_lower_section">
        <div class="explore_restaurants_filters">
            <div class="explore_restaurants_filters_title">Filtrar por categor√≠a</div>
            <%= link_to restaurants_path, class: "explore_restaurants_filters_item" do %>
              <div>Todos los restaurantes</div>
            <% end %>
            <% @categories.each do |category| %>
                <%= link_to restaurants_path(filter: category.nombre), class: "explore_restaurants_filters_item" do %>
                    <div><%= category.nombre %></div>
                <% end %>
            <% end %>
        </div>
        <div class="explore_restaurants_section">
            <% @restaurants.each do |restaurant| %>
                <%= link_to restaurant_path(restaurant), style: "text-decoration: none;" do %>
                    <div class="explore_restaurants_box">
                        <%= image_tag restaurant.ruta_img_fondo, class: "explore_restaurants_box_image" %>
                        <div class="explore_restaurant_box_name"><%= restaurant.nombre %></div>
                        <div class="explore_restaurant_box_category"><%= restaurant.categoria %></div>
                        <div>
                          <% if @ratings && @ratings.select {|r| r.what == restaurant.id} %>
                            <% @ratings@ratings.select {|r| r.what == restaurant.id}["rest_val"].floor.times do %> 
                            <%= image_tag "Star", style: "width: 25px; height: 25px" %>
                          <% end %>
                        <% end %>
                        </div>
                    </div>
                <% end %>
            <% end %>
        </div>
    </div>
</div>

):
1:    <div class="explore_container">
2:        <div class="explore_best_valued">
3:            <div class="explore_top_section_title">Mejor valorados</div>
4:            <div class="explore_top_section_best_valued_list">
5:              <% @tops.each_with_index do |restaurant, pos| %>
6:                <%= link_to restaurant_path(restaurant), class: "explore_top_section_best_valued_list_item", style: "text-decoration: none" do %>
7:                    <%= pos + 1 %> - <%= restaurant.nombre %> 
8:                <% end %>
9:              <% end %>
10:            </div>
11:        </div>
12:        <div class="explore_promoted_restaurant">
13:            <div class="explore_top_section_title">Restaurante promocionado</div>
14:            <div class="explore_promoted_restaurant_box">
15:                <%= image_tag "Default-restaurant-img", class: "explore_promoted_restaurant_image" %>
16:                <div class="explore_promoted_restaurant_info">
17:                    <div>
18:                        <div class="explore_promoted_restaurant_name">
19:                            Madison Smashburgers<br><span class="title_key_word">Burger</span>
20:                        </div>
21:                        <div class="explore_promoted_restaurant_stars">
22:                            <%= image_tag "Star", style: "width: 25px; height: 25px" %>
23:                            <%= image_tag "Star", style: "width: 25px; height: 25px" %>
24:                            <%= image_tag "Star", style: "width: 25px; height: 25px" %>
25:                            <%= image_tag "Star", style: "width: 25px; height: 25px" %>
26:                            <%= image_tag "Star", style: "width: 25px; height: 25px" %>
27:                        </div>
28:                    </div>
29:                    <div>
30:                        <div class="restaurants_einaeats_button">
31:                            <%= image_tag "Bolsa-einaeats" %>
32:                            <span class="restaurant_einaeats_button_text">Pedir en EinaEats</span>
33:                        </div>
34:                    </div>
35:                </div>
36:            </div>
37:        </div>
38:        <div class="explore_lower_section">
39:            <div class="explore_restaurants_filters">
40:                <div class="explore_restaurants_filters_title">Filtrar por categor√≠a</div>
41:                <%= link_to restaurants_path, class: "explore_restaurants_filters_item" do %>
42:                  <div>Todos los restaurantes</div>
43:                <% end %>
44:                <% @categories.each do |category| %>
45:                    <%= link_to restaurants_path(filter: category.nombre), class: "explore_restaurants_filters_item" do %>
46:                        <div><%= category.nombre %></div>
47:                    <% end %>
48:                <% end %>
49:            </div>
50:            <div class="explore_restaurants_section">
51:                <% @restaurants.each do |restaurant| %>
52:                    <%= link_to restaurant_path(restaurant), style: "text-decoration: none;" do %>
53:                        <div class="explore_restaurants_box">
54:                            <%= image_tag restaurant.ruta_img_fondo, class: "explore_restaurants_box_image" %>
55:                            <div class="explore_restaurant_box_name"><%= restaurant.nombre %></div>
56:                            <div class="explore_restaurant_box_category"><%= restaurant.categoria %></div>
57:                            <div>
58:                              <% if @ratings && @ratings.select {|r| r.what == restaurant.id} %>
59:                                <% @ratings@ratings.select {|r| r.what == restaurant.id}["rest_val"].floor.times do %> 
60:                                <%= image_tag "Star", style: "width: 25px; height: 25px" %>
61:                              <% end %>
62:                            <% end %>
63:                            </div>
64:                        </div>
65:                    <% end %>
66:                <% end %>
67:            </div>
68:        </div>
69:    </div>
  
app/views/restaurants/index.html.erb:59: syntax error, unexpected instance variable, expecting `end' or dummy end
app/views/restaurants/index.html.erb:72: syntax error, unexpected `end'
Started GET "/" for 127.0.0.1 at 2023-11-19 11:20:09 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRank Load (31.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  ‚Ü≥ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (31.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (31.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (30.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (30.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (30.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  ‚Ü≥ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (37.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  ‚Ü≥ app/views/restaurants/index.html.erb:51
  Rendered restaurants/index.html.erb within layouts/application (Duration: 128.0ms | Allocations: 7671)
  Rendered layout layouts/application.html.erb (Duration: 128.4ms | Allocations: 7764)
Completed 500 Internal Server Error in 929ms (ActiveRecord: 755.2ms | Allocations: 22861)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /usr/local/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (Nil location provided. Can't build URI.):
    51:             <% @restaurants.each do |restaurant| %>
    52:                 <%= link_to restaurant_path(restaurant), style: "text-decoration: none;" do %>
    53:                     <div class="explore_restaurants_box">
    54:                         <%= image_tag restaurant.ruta_img_fondo, class: "explore_restaurants_box_image" %>
    55:                         <div class="explore_restaurant_box_name"><%= restaurant.nombre %></div>
    56:                         <div class="explore_restaurant_box_category"><%= restaurant.categoria %></div>
    57:                         <div>
  
app/views/restaurants/index.html.erb:54
app/views/restaurants/index.html.erb:52
app/views/restaurants/index.html.erb:51
Started GET "/" for 127.0.0.1 at 2023-11-19 11:21:47 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRank Load (29.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  ‚Ü≥ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (32.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (32.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (30.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (29.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (30.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  ‚Ü≥ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (36.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  ‚Ü≥ app/views/restaurants/index.html.erb:51
  Rendered restaurants/index.html.erb within layouts/application (Duration: 120.8ms | Allocations: 9199)
  Rendered layouts/_header.html.erb (Duration: 2.4ms | Allocations: 1351)
  [1m[36mUser Load (32.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "limon"], ["LIMIT", 1]]
  ‚Ü≥ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (278.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "limon"]]
  ‚Ü≥ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "limon"], ["LIMIT", 1]]
  ‚Ü≥ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 575.8ms | Allocations: 17506)
  Rendered layout layouts/application.html.erb (Duration: 772.8ms | Allocations: 47378)
Completed 200 OK in 1450ms (Views: 270.7ms | ActiveRecord: 864.3ms | Allocations: 62535)


Started GET "/restaurants/3/" for 127.0.0.1 at 2023-11-19 11:22:13 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (125.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (264.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (36.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (379.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  ‚Ü≥ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (39.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  ‚Ü≥ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (50.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  ‚Ü≥ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (32.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  ‚Ü≥ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (35.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='limon' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  ‚Ü≥ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (31.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  ‚Ü≥ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (30.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  ‚Ü≥ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (31.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  ‚Ü≥ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (39.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  ‚Ü≥ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (40.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='limon' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  ‚Ü≥ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (32.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='limon' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  ‚Ü≥ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 37.8ms | Allocations: 3045)
  [1m[36mDish Load (36.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  ‚Ü≥ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (30.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  ‚Ü≥ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 2.4ms | Allocations: 872)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 424)
  Rendered layouts/_comment.html.erb (Duration: 95.2ms | Allocations: 5725)
  Rendered layouts/_add_comment.html.erb (Duration: 2.3ms | Allocations: 667)
  [1m[35m (31.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  ‚Ü≥ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 427)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 423)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 426)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 423)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 426)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 423)
  Rendered layouts/_comment.html.erb (Duration: 9.2ms | Allocations: 5145)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 470.3ms | Allocations: 25668)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1064)
  [1m[36mUser Load (32.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "limon"], ["LIMIT", 1]]
  ‚Ü≥ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (30.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "limon"]]
  ‚Ü≥ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "limon"], ["LIMIT", 1]]
  ‚Ü≥ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 71.8ms | Allocations: 3997)
  Rendered layout layouts/application.html.erb (Duration: 548.3ms | Allocations: 34462)
Completed 200 OK in 2049ms (Views: 260.5ms | ActiveRecord: 1590.7ms | Allocations: 57002)


Started GET "/" for 127.0.0.1 at 2023-11-19 11:23:10 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRank Load (38.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  ‚Ü≥ app/controllers/restaurants_controller.rb:20:in `map'
  [1m[36mRestaurant Load (30.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:20:in `block in index'
  [1m[36mRestaurant Load (39.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:20:in `block in index'
  [1m[36mRestaurant Load (51.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:20:in `block in index'
  [1m[36mRestaurant Load (31.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:20:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (31.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  ‚Ü≥ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (32.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  ‚Ü≥ app/views/restaurants/index.html.erb:51
  Rendered restaurants/index.html.erb within layouts/application (Duration: 126.8ms | Allocations: 9198)
  Rendered layouts/_header.html.erb (Duration: 2.2ms | Allocations: 1324)
  [1m[36mUser Load (35.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "limon"], ["LIMIT", 1]]
  ‚Ü≥ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (42.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "limon"]]
  ‚Ü≥ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "limon"], ["LIMIT", 1]]
  ‚Ü≥ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 184.0ms | Allocations: 12806)
  Rendered layout layouts/application.html.erb (Duration: 335.4ms | Allocations: 42465)
Completed 200 OK in 1061ms (Views: 90.2ms | ActiveRecord: 668.0ms | Allocations: 57531)


Started GET "/" for 127.0.0.1 at 2023-11-19 11:24:01 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRank Load (32.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  ‚Ü≥ app/controllers/restaurants_controller.rb:20:in `map'
  [1m[36mRestaurant Load (31.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:20:in `block in index'
  [1m[36mRestaurant Load (30.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:20:in `block in index'
  [1m[36mRestaurant Load (40.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:20:in `block in index'
  [1m[36mRestaurant Load (37.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:20:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (38.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  ‚Ü≥ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (43.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  ‚Ü≥ app/views/restaurants/index.html.erb:51
  Rendered restaurants/index.html.erb within layouts/application (Duration: 144.6ms | Allocations: 9198)
  Rendered layouts/_header.html.erb (Duration: 2.2ms | Allocations: 1324)
  [1m[36mUser Load (32.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "limon"], ["LIMIT", 1]]
  ‚Ü≥ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (33.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "limon"]]
  ‚Ü≥ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "limon"], ["LIMIT", 1]]
  ‚Ü≥ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 176.6ms | Allocations: 12745)
  Rendered layout layouts/application.html.erb (Duration: 348.5ms | Allocations: 42423)
Completed 200 OK in 1225ms (Views: 91.1ms | ActiveRecord: 833.8ms | Allocations: 57496)


Started GET "/restaurants?filter=chino" for 127.0.0.1 at 2023-11-19 11:24:48 +0100
Processing by RestaurantsController#index as HTML
  Parameters: {"filter"=>"chino"}
Completed 500 Internal Server Error in 188ms (ActiveRecord: 0.0ms | Allocations: 10882)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /usr/local/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::ConfigurationError (Can't join 'Rank' to association named 'restaurants'; perhaps you misspelled it?):
  
app/controllers/restaurants_controller.rb:8:in `index'
Started GET "/restaurants?filter=chino" for 127.0.0.1 at 2023-11-19 11:25:23 +0100
Processing by RestaurantsController#index as HTML
  Parameters: {"filter"=>"chino"}
  [1m[36mRestaurant Load (67.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" WHERE "restaurants"."categoria" = $1 GROUP BY "what" /* loading for inspect */ LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 11]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:8:in `index'
  [1m[36mRestaurant Exists? (70.6ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" WHERE "restaurants"."categoria" = $1 GROUP BY "what" LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:10:in `index'
  [1m[36mRank Load (31.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  ‚Ü≥ app/controllers/restaurants_controller.rb:20:in `map'
  [1m[36mRestaurant Load (427.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:20:in `block in index'
  [1m[36mRestaurant Load (39.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:20:in `block in index'
  [1m[36mRestaurant Load (44.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:20:in `block in index'
  [1m[36mRestaurant Load (33.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:20:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (44.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  ‚Ü≥ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (31.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."categoria" = $1[0m  [["categoria", "chino"]]
  ‚Ü≥ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (30.5ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" WHERE "restaurants"."categoria" = $1 GROUP BY "what"[0m  [["categoria", "chino"]]
  ‚Ü≥ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 195.7ms | Allocations: 8637)
  Rendered layout layouts/application.html.erb (Duration: 196.1ms | Allocations: 8730)
Completed 500 Internal Server Error in 2038ms (ActiveRecord: 1647.9ms | Allocations: 26049)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /usr/local/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (no implicit conversion of String into Integer):
    60:                         <div class="explore_restaurant_box_category"><%= restaurant.categoria %></div>
    61:                         <div>
    62:                           <% if @ratings && @ratings.select {|r| r.what == restaurant.id} %>
    63:                             <% @ratings.select {|r| r.what == restaurant.id}["rest_val"].floor.times do %> 
    64:                             <%= image_tag "Star", style: "width: 25px; height: 25px" %>
    65:                           <% end %>
    66:                         <% end %>
  
app/views/restaurants/index.html.erb:63:in `[]'
app/views/restaurants/index.html.erb:63
app/views/restaurants/index.html.erb:52
app/views/restaurants/index.html.erb:51
Started GET "/restaurants?filter=chino" for 127.0.0.1 at 2023-11-19 11:26:05 +0100
Processing by RestaurantsController#index as HTML
  Parameters: {"filter"=>"chino"}
  [1m[36mRestaurant Load (43.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" WHERE "restaurants"."categoria" = $1 GROUP BY "what" /* loading for inspect */ LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 11]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:8:in `index'
  [1m[36mRestaurant Exists? (30.7ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" WHERE "restaurants"."categoria" = $1 GROUP BY "what" LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:10:in `index'
  [1m[36mRank Load (29.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  ‚Ü≥ app/controllers/restaurants_controller.rb:20:in `map'
  [1m[36mRestaurant Load (35.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:20:in `block in index'
  [1m[36mRestaurant Load (47.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:20:in `block in index'
  [1m[36mRestaurant Load (32.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:20:in `block in index'
  [1m[36mRestaurant Load (31.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:20:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (42.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  ‚Ü≥ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (31.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."categoria" = $1[0m  [["categoria", "chino"]]
  ‚Ü≥ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (30.4ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" WHERE "restaurants"."categoria" = $1 GROUP BY "what"[0m  [["categoria", "chino"]]
  ‚Ü≥ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 167.4ms | Allocations: 8601)
  Rendered layout layouts/application.html.erb (Duration: 167.6ms | Allocations: 8694)
Completed 500 Internal Server Error in 1171ms (ActiveRecord: 835.9ms | Allocations: 25554)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /usr/local/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (no implicit conversion of Symbol into Integer):
    60:                         <div class="explore_restaurant_box_category"><%= restaurant.categoria %></div>
    61:                         <div>
    62:                           <% if @ratings && @ratings.select {|r| r.what == restaurant.id} %>
    63:                             <% @ratings.select {|r| r.what == restaurant.id}[:rest_val].floor.times do %> 
    64:                             <%= image_tag "Star", style: "width: 25px; height: 25px" %>
    65:                           <% end %>
    66:                         <% end %>
  
app/views/restaurants/index.html.erb:63
app/views/restaurants/index.html.erb:52
app/views/restaurants/index.html.erb:51
Started GET "/restaurants?filter=chino" for 127.0.0.1 at 2023-11-19 11:26:49 +0100
Processing by RestaurantsController#index as HTML
  Parameters: {"filter"=>"chino"}
  [1m[36mRestaurant Load (36.2ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" WHERE "restaurants"."categoria" = $1 GROUP BY "what" /* loading for inspect */ LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 11]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:8:in `index'
  [1m[36mRestaurant Exists? (31.7ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" WHERE "restaurants"."categoria" = $1 GROUP BY "what" LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:10:in `index'
  [1m[36mRank Load (34.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  ‚Ü≥ app/controllers/restaurants_controller.rb:20:in `map'
  [1m[36mRestaurant Load (29.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:20:in `block in index'
  [1m[36mRestaurant Load (29.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:20:in `block in index'
  [1m[36mRestaurant Load (30.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:20:in `block in index'
  [1m[36mRestaurant Load (29.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:20:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (37.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  ‚Ü≥ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (31.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."categoria" = $1[0m  [["categoria", "chino"]]
  ‚Ü≥ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (44.0ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" WHERE "restaurants"."categoria" = $1 GROUP BY "what"[0m  [["categoria", "chino"]]
  ‚Ü≥ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 173.2ms | Allocations: 8637)
  Rendered layout layouts/application.html.erb (Duration: 173.5ms | Allocations: 8730)
Completed 500 Internal Server Error in 1162ms (ActiveRecord: 817.4ms | Allocations: 25573)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /usr/local/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `rest_val' for [#<Restaurant what: 3, rest_val: 0.3e1, id: nil>]:Array):
    60:                         <div class="explore_restaurant_box_category"><%= restaurant.categoria %></div>
    61:                         <div>
    62:                           <% if @ratings && @ratings.select {|r| r.what == restaurant.id} %>
    63:                             <% @ratings.select {|r| r.what == restaurant.id}.rest_val.floor.times do %> 
    64:                             <%= image_tag "Star", style: "width: 25px; height: 25px" %>
    65:                           <% end %>
    66:                         <% end %>
  
app/views/restaurants/index.html.erb:63
app/views/restaurants/index.html.erb:52
app/views/restaurants/index.html.erb:51
Started GET "/restaurants?filter=chino" for 127.0.0.1 at 2023-11-19 11:27:32 +0100
Processing by RestaurantsController#index as HTML
  Parameters: {"filter"=>"chino"}
  [1m[36mRestaurant Load (35.5ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" WHERE "restaurants"."categoria" = $1 GROUP BY "what" /* loading for inspect */ LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 11]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:8:in `index'
  [1m[36mRestaurant Exists? (32.7ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" WHERE "restaurants"."categoria" = $1 GROUP BY "what" LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:10:in `index'
  [1m[36mRank Load (31.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  ‚Ü≥ app/controllers/restaurants_controller.rb:20:in `map'
  [1m[36mRestaurant Load (29.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:20:in `block in index'
  [1m[36mRestaurant Load (34.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:20:in `block in index'
  [1m[36mRestaurant Load (30.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:20:in `block in index'
  [1m[36mRestaurant Load (29.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:20:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (31.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  ‚Ü≥ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (30.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."categoria" = $1[0m  [["categoria", "chino"]]
  ‚Ü≥ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (30.1ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" WHERE "restaurants"."categoria" = $1 GROUP BY "what"[0m  [["categoria", "chino"]]
  ‚Ü≥ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 146.0ms | Allocations: 10554)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1324)
  [1m[36mUser Load (30.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "limon"], ["LIMIT", 1]]
  ‚Ü≥ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (30.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "limon"]]
  ‚Ü≥ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "limon"], ["LIMIT", 1]]
  ‚Ü≥ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 153.8ms | Allocations: 12738)
  Rendered layout layouts/application.html.erb (Duration: 317.1ms | Allocations: 43754)
Completed 200 OK in 1234ms (Views: 65.6ms | ActiveRecord: 914.1ms | Allocations: 60617)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-19 11:27:39 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRank Load (66.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  ‚Ü≥ app/controllers/restaurants_controller.rb:20:in `map'
  [1m[36mRestaurant Load (30.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:20:in `block in index'
  [1m[36mRestaurant Load (29.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:20:in `block in index'
  [1m[36mRestaurant Load (30.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:20:in `block in index'
  [1m[36mRestaurant Load (30.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:20:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (30.8ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  ‚Ü≥ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (30.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  ‚Ü≥ app/views/restaurants/index.html.erb:51
  Rendered restaurants/index.html.erb within layouts/application (Duration: 80.4ms | Allocations: 6778)
  Rendered layouts/_header.html.erb (Duration: 6.8ms | Allocations: 1055)
  [1m[36mUser Load (31.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "limon"], ["LIMIT", 1]]
  ‚Ü≥ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (30.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "limon"]]
  ‚Ü≥ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "limon"], ["LIMIT", 1]]
  ‚Ü≥ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 72.1ms | Allocations: 3994)
  Rendered layout layouts/application.html.erb (Duration: 164.8ms | Allocations: 15701)
Completed 200 OK in 360ms (Views: 42.3ms | ActiveRecord: 310.3ms | Allocations: 18012)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-19 11:28:54 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (36.4ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (35.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  ‚Ü≥ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (38.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (30.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (30.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (33.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (31.8ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  ‚Ü≥ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (47.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  ‚Ü≥ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (35.0ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  ‚Ü≥ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 176.4ms | Allocations: 14880)
  Rendered layout layouts/application.html.erb (Duration: 176.7ms | Allocations: 14973)
Completed 500 Internal Server Error in 842ms (ActiveRecord: 775.1ms | Allocations: 31031)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /usr/local/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `[]' for nil:NilClass):
    60:                         <div class="explore_restaurant_box_category"><%= restaurant.categoria %></div>
    61:                         <div>
    62:                           <% if @ratings && @ratings.select {|r| r.what == restaurant.id} %>
    63:                             <% @ratings.select {|r| r.what == restaurant.id}[0][:rest_val].floor.times do %> 
    64:                             <%= image_tag "Star", style: "width: 25px; height: 25px" %>
    65:                           <% end %>
    66:                         <% end %>
  
app/views/restaurants/index.html.erb:63
app/views/restaurants/index.html.erb:52
app/views/restaurants/index.html.erb:51
Started GET "/restaurants" for 127.0.0.1 at 2023-11-19 11:29:48 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (31.5ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (33.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  ‚Ü≥ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (33.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (30.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (30.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (30.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (31.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  ‚Ü≥ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (38.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  ‚Ü≥ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (34.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  ‚Ü≥ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 158.7ms | Allocations: 14478)
  Rendered layouts/_header.html.erb (Duration: 2.0ms | Allocations: 1328)
  [1m[36mUser Load (30.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "limon"], ["LIMIT", 1]]
  ‚Ü≥ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (31.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "limon"]]
  ‚Ü≥ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "limon"], ["LIMIT", 1]]
  ‚Ü≥ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 160.6ms | Allocations: 12777)
  Rendered layout layouts/application.html.erb (Duration: 342.3ms | Allocations: 47723)
Completed 200 OK in 1175ms (Views: 80.8ms | ActiveRecord: 1042.0ms | Allocations: 63804)


Started GET "/restaurants?filter=chino" for 127.0.0.1 at 2023-11-19 11:30:01 +0100
Processing by RestaurantsController#index as HTML
  Parameters: {"filter"=>"chino"}
  [1m[36mRestaurant Exists? (555.6ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (31.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  ‚Ü≥ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (31.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (31.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (30.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (31.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (33.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  ‚Ü≥ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (35.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."categoria" = $1[0m  [["categoria", "chino"]]
  ‚Ü≥ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (39.0ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  ‚Ü≥ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 129.5ms | Allocations: 8195)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1053)
  [1m[36mUser Load (34.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "limon"], ["LIMIT", 1]]
  ‚Ü≥ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (31.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "limon"]]
  ‚Ü≥ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "limon"], ["LIMIT", 1]]
  ‚Ü≥ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 73.7ms | Allocations: 3963)
  Rendered layout layouts/application.html.erb (Duration: 208.9ms | Allocations: 17094)
Completed 200 OK in 934ms (Views: 36.4ms | ActiveRecord: 884.9ms | Allocations: 19958)


